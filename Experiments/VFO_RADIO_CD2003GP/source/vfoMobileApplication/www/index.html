<!DOCTYPE html>
<html>

<head>

    <title>PU2CLR VFO</title>
    <meta charset="utf-8">

    <!-- Resolve o problema de Scroll no Windows 8.1 -->
    <!--meta http-equiv="X-UA-Compatible" content="IE=10"-->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="css/index.css" rel="stylesheet" type="text/css" />

    <link rel="stylesheet" href="css/jquery.mobile-1.4.5.min.css" />
    <link rel="stylesheet" href="css/jquery-ui.min.css" />
    <link href="css/euopino-theme.min.css" rel="stylesheet" type="text/css" />
    <link href="css/jquery.rotaryswitch.css" rel="stylesheet" type="text/css">

</head>

<body>


    <div data-role="page" id="pg_ble_connect" data-theme="d">

        <div data-role="header" data-position="fixed">
            <h4>VFO - By PU2CLR</h4>
        </div><!-- /header -->

        <div>
            Click on Button <b>Refresh</b> to select the Bluetooth
        </div>

        <div id="connectionScreen">
            <ul id="deviceList" class="topcoat-list">
            </ul>
            <div style="margin: 10px">
                <button class="topcoat-button" id="refreshButton">Refresh</button>
            </div>
        </div>

        <div id="messageDiv"></div>

        <div data-role="footer" data-id="persistent_navbar" data-position="fixed">
            <div data-role="navbar">
                <ul data-mini="true">
                    <li><a href="#pg_help" data-transition="flip" data-icon="info">Help</a></li>
                    <li><a href="#pg_radio" data-transition="flip" data-icon="audio">Radio</a></li>
                </ul>
            </div>
        </div>

    </div>

    <div data-role="page" id="pg_radio" data-theme="d">

        <div data-role="header" data-position="fixed">
            <h4>VFO - By PU2CLR</h4>
        </div><!-- /header -->

        <div data-role="fieldcontain" style="text-align:center;vertical-align:middle; z-index: 10000;">
            <label for="freq">Frequência</label>
            <input type="text" name="freq" id="freq" placeholder="Frequência">
        </div>

        <div data-role="main" data-id="persistent_navbar" data-position="fixed">
            <div data-role="navbar">
                <ul data-mini="true">
                    <li>
                        <h4>VFO</h4>
                        <input type="text" id="tune" value="0">
                    </li>
                    <li></li>
                    <li>
                        <h4>BFO</h4>
                        <input type="text" id="fineTune" value="0">
                    </li>
                </ul>
            </div>
        </div>

        <div data-role="fieldcontain" style="text-align:left;vertical-align:middle; z-index: 10000;">
            <div style="width: 100%; display: table;" data-mini="true">
                <fieldset data-role="controlgroup" data-type="horizontal" data-mini="true">
                    <legend>Frequency:</legend>
                    <div data-role="content">
                        <input type="number" id="messageInput" value="" />
                        <button id="sendFreq">Enter</button>
                    </div>
                </fieldset>
            </div>
        </div>

        <!-- correção para wp8 -->
        <div data-role="footer" data-id="persistent_navbar" data-position="fixed">
            <div data-role="navbar">
                <ul data-mini="true">
                    <li><a href="#pg_AM" data-transition="flip" data-icon="audio">AM</a></li>
                    <li><a href="#pg_SW" data-transition="flip" data-icon="location">SW</a></li>
                    <li><a href="#pg_FM" data-transition="flip" data-icon="audio">FM</a></li>
                    <li><a href="#pg_VHF" data-transition="flip" data-icon="location">VHF</a></li>
                </ul>
            </div>
        </div>
    </div>


    <!-- ####### Help ###### -->

    <div data-role="page" id="pg_help" data-theme="d" style="margin:3px;width: 95%; padding: 5px;">

        <div data-role="header" data-position="fixed">
            <h5>Help</h5>
        </div><!-- /header -->


        <div data-role="main" class="ui-content" style="text-align:justify;vertical-align:middle;">
            <p>
                VFO and BFO Bluetooth (BLE) remote control.
                By PU2CLR.
                Ricardo Lima Caratti
            </p>
            <p>
                This application is a remote control to the VFO and BFO project that you can control two clock outputs
                of the Si5351A by
                using the Arduino. The VFO (CLK0) can oscillate from 100KHz to 160MHz and the second (CLK1) can
                oscillate from 452KHz to
                458KHz.

                Click <a href="https://github.com/pu2clr/VFO_BFO_OLED_ARDUINO/tree/master/Doc/En">here</a> for detail
            </p>

        </div>

        <!-- correção para wp8 -->
        <div data-role="footer" data-id="persistent_navbar" data-position="fixed">
            <div data-role="navbar">
                <ul data-mini="true">
                    <li><a href="#pg_ble_connect" data-transition="flip" data-icon="home">Back</a></li>
                    <li><a href="#pg_radio" data-transition="flip" data-icon="audio">Radio</a></li>
                </ul>
            </div>
        </div>
    </div>


    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript" src="cordova.js"></script>
    <script src="js/jquery-1.11.0.min.js" type="text/javascript"></script>
    <script src="js/jquery.mobile-1.4.5.min.js" type="text/javascript"></script>
    <script src="js/jquery-ui.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="js/fastclick.js"></script>
    <script type="text/javascript" src="js/controle.js"></script>
    <script src="js/jquery.rotaryswitch.js"></script>
    <script>
        $(function () {
            // alert ("Aqui");
            var lastPos = parseInt($('#tune').val());
            var lastPosFineTune = parseInt($('#fineTune').val());

            // Frequency will be get from Arduino VFO
            var freq = 500;

            $('#tune').rotaryswitch({ themeClass: 'big' });
            $('#fineTune').rotaryswitch({ themeClass: 'big' });

            var tune = $('#tune').rotaryswitch();

            // It is executed whenever you rotate the Tune knob
            tune.on('change', function () {
                var c;
                var currentPos = parseInt($('#tune').val());
                if (currentPos == 0 && lastPos == 29) {
                    freq += 10;
                    c = "+";
                } else if (currentPos == 29 && lastPos == 0) {
                    freq -= 10;
                    c = "-";
                } else if (currentPos < lastPos) {
                    freq -= 10;
                    c = "-";
                } else if (currentPos > lastPos) {
                    freq += 10;
                    c = "+";
                }
                $('#freq').val(freq);
                lastPos = parseInt($('#tune').val());
                app.sendToArduino(c);
            });

            var fineTune = $('#fineTune').rotaryswitch();
            // It is executed whenever you rotate the fineTune knob
            fineTune.on('change', function () {
                var c;
                var currentPos = parseInt($('#tune').val());
                if (currentPos == 0 && lastPosFineTune == 29) {
                    freq += 10;
                    c = ">";
                } else if (currentPos == 29 && lastPosFineTune == 0) {
                    freq -= 10;
                    c = "<";
                } else if (currentPos < lastPosFineTune) {
                    freq -= 10;
                    c = "<";
                } else if (currentPos > lastPosFineTune) {
                    freq += 10;
                    c = ">";
                }
                lastPosFineTune = parseInt($('#fineTune').val());
                app.sendToArduino(c);
            });

        });
    </script>

    <script type="text/javascript">
        app.initialize();

    </script>
</body>

</html>